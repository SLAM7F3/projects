// ========================================================================
// Program CREATE_COPY_SCRIPT is a little utility program which we
// wrote in order to down-select JPEG images generated by our OSG
// tools.  This is a brute-force approach to speeding up AVI movies
// generated via Adobe Premiere.
// ========================================================================
// Last updated on 11/30/05
// ========================================================================

#include <iostream>
#include <string>
#include "general/filefuncs.h"
#include "general/outputfuncs.h"
#include "general/stringfuncs.h"
#include "general/sysfuncs.h"

using std::cin;
using std::cout;
using std::endl;
using std::ofstream;
using std::string;

// ==========================================================================
int main( int argc, char** argv )
{
   int n_start,n_stop;
   cout << "Enter starting image number:" << endl;
   cin >> n_start;
   cout << "Enter stopping image number:" << endl;
   cin >> n_stop;

   string basefilename="fxStabilizer_clip1\\ ";
//   string basefilename="clip-20\\ ";
   cout << "Enter base filename:" << endl;
   cin >> basefilename;

   int skip;
   cout << "Enter image skip value (default = 1):" << endl;
   cin >> skip;

   string suffix=".JPG";
//   string suffix=".PNG";
//   string suffix=".png";
   string imagedir="./";
   string scriptfilename="copy_images";
   scriptfilename=imagedir+scriptfilename;
   ofstream scriptstream;
   filefunc::openfile(scriptfilename,scriptstream);
   cout << "scriptfilename = " << scriptfilename << endl;

   string prefix="stabilized_clip1_";
   cout << "Enter prefix:" << endl;
   cin >> prefix;
   
   for (int i=n_start; i<n_stop; i += skip)
   {
//      string imagenumber_str=stringfunc::integer_to_string(i,3);
      string imagenumber_str=stringfunc::integer_to_string(i,4);
      string filename=basefilename+imagenumber_str+suffix;
      string command="cp "+filename+" "+prefix
         +imagenumber_str+suffix;
      scriptstream << command << endl;
   }

   filefunc::closefile(scriptfilename,scriptstream);

   string unix_command="chmod a+x "+scriptfilename;
   sysfunc::unix_command(unix_command);
}
